{
  "$id": "https://json.schemastore.org/pubspec",
  "$schema": "http://json-schema.org/draft-07/schema",
  "anyOf": [
    {
      "$ref": "#/definitions/Testcase"
    },
    {
      "$ref": "#/definitions/allOfSteps"
    }
  ],
  "definitions": {
    "allOfSteps": {
      "type": "array",
      "description": "Steps",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/DocOpenAPI"
          },
          {
            "$ref": "#/definitions/DocSequence"
          },
          {
            "$ref": "#/definitions/Templates"
          },
          {
            "$ref": "#/definitions/Require"
          },
          {
            "$ref": "#/definitions/DocSwagger"
          },
          {
            "$ref": "#/definitions/DocMarkdown"
          },
          {
            "$ref": "#/definitions/OutputFile"
          },
          {
            "$ref": "#/definitions/Import"
          },
          {
            "$ref": "#/definitions/Pause"
          },
          {
            "$ref": "#/definitions/Script"
          },
          {
            "$ref": "#/definitions/Echo"
          },
          {
            "$ref": "#/definitions/Clear"
          },
          {
            "$ref": "#/definitions/Schema"
          },
          {
            "$ref": "#/definitions/Vars"
          },
          {
            "$ref": "#/definitions/Validate"
          },
          {
            "$ref": "#/definitions/Validator"
          },
          {
            "$ref": "#/definitions/Utils"
          },
          {
            "$ref": "#/definitions/Regex"
          },
          {
            "$ref": "#/definitions/Exec"
          },
          {
            "$ref": "#/definitions/PreExec"
          },
          {
            "$ref": "#/definitions/Input"
          },
          {
            "$ref": "#/definitions/Api"
          },
          {
            "$ref": "#/definitions/Get"
          },
          {
            "$ref": "#/definitions/Post"
          },
          {
            "$ref": "#/definitions/Put"
          },
          {
            "$ref": "#/definitions/Patch"
          },
          {
            "$ref": "#/definitions/Head"
          },
          {
            "$ref": "#/definitions/Delete"
          },
          {
            "$ref": "#/definitions/Menu"
          },
          {
            "$ref": "#/definitions/Group"
          },
          {
            "$ref": "#/definitions/Load"
          }
        ]
      }
    },
    "Import": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Import": {
          "anyOf": [
            {
              "description": "Path to scenarios .yaml file",
              "type": "string"
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/defaultTags"
                },
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Description"
                    },
                    "src": {
                      "type": "string",
                      "description": "Path to scenarios .yaml file"
                    }
                  }
                }
              ]
            }
          ]
        }
      }
    },
    "Load": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Load": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "description": "Import data file(.json, .yaml, .csv(separate by , and \n))",
              "type": "object",
              "required": [
                "file"
              ],
              "properties": {
                "file": {
                  "type": "string"
                },
                "var": {
                  "description": "Load data to a variable after handle",
                  "$ref": "#/definitions/setVar"
                }
              }
            }
          ]
        }
      }
    },
    "DocSequence": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DocSequence": {
          "description": "Extract log from comment in code",
          "type": "object",
          "required": [
            "title"
          ],
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "required": [
                "saveTo"
              ],
              "oneOf": [
                {
                  "required": [
                    "src"
                  ]
                },
                {
                  "required": [
                    "combineOverviews"
                  ]
                }
              ],
              "properties": {
                "title": {
                  "type": "string",
                  "description": "Service name"
                },
                "description": {
                  "type": "string"
                },
                "runOnNodeJS": {
                  "type": "boolean",
                  "description": "Set to true when could not run bin path. Only run via node command"
                },
                "theme": {
                  "type": "string",
                  "enum": [
                    "default",
                    "forest",
                    "dark",
                    "neutral"
                  ]
                },
                "serviceName": {
                  "type": "string"
                },
                "showEventDetails": {
                  "type": "boolean",
                  "description": "Show all of events name in overview diagram",
                  "default": "true"
                },
                "showRequestDetails": {
                  "type": "boolean",
                  "description": "Show all of requests name in overview diagram",
                  "default": "true"
                },
                "space": {
                  "type": "number",
                  "description": "Space in code. Default it auto detect space in each files"
                },
                "backgroundColor": {
                  "type": "string",
                  "description": "Chart background color. (Not support .svg)",
                  "examples": [
                    "transparent",
                    "red",
                    "#F0F0F0"
                  ],
                  "default": "transparent"
                },
                "combineOverviews": {
                  "type": "array",
                  "description": "Combine multiple overviews to one",
                  "items": {
                    "type": "string"
                  }
                },
                "width": {
                  "type": "number",
                  "description": "Chart width"
                },
                "height": {
                  "type": "number",
                  "description": "Chart height"
                },
                "config": {
                  "type": "object",
                  "description": "Mermaid configuration"
                },
                "cssFile": {
                  "type": "string",
                  "description": "CSS file for the page"
                },
                "puppeteerConfig": {
                  "type": "object",
                  "description": "Puppeteer configuration"
                },
                "autoNumber": {
                  "type": "boolean",
                  "description": "Auto write number for each steps",
                  "default": false
                },
                "stack": {
                  "type": "boolean",
                  "description": "Activations can be stacked for same actor",
                  "default": false
                },
                "saveTo": {
                  "type": "string",
                  "description": "Output mermaid file (.mmd)",
                  "examples": [
                    "/test.mmd"
                  ]
                },
                "outputType": {
                  "type": "string",
                  "description": "Generate .MD content which includes .svg file or mermaid syntax",
                  "enum": [
                    "svg",
                    "mmd"
                  ],
                  "default": "mmd"
                },
                "puppeteerPath": {
                  "type": "string",
                  "description": "Path of folder to puppeteer module. Used when outputType is 'svg'. Default it auto detect in global npm or yarn"
                },
                "src": {
                  "type": [
                    "array",
                    "string"
                  ],
                  "description": "Source files",
                  "items": {
                    "type": "string",
                    "examples": [
                      "/test.ts"
                    ]
                  }
                },
                "excludes": {
                  "description": "File or folder which not be scaned",
                  "type": "array",
                  "items": {
                    "type": "string",
                    "default": [
                      "node_modules"
                    ],
                    "examples": [
                      "node_modules"
                    ]
                  }
                },
                "externalLinks": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    }
                  },
                  "description": "Extra links. Example document api"
                },
                "template": {
                  "type": "string",
                  "description": "Auto generate folders, files to specific templates",
                  "enum": [
                    "gitlab.wiki",
                    "github"
                  ],
                  "default": "github"
                },
                "ext": {
                  "type": "array",
                  "description": "File ext which not be scaned",
                  "items": {
                    "type": "string",
                    "default": [
                      ".ts",
                      ".js",
                      ".go",
                      ".py",
                      ".yaml"
                    ],
                    "examples": [
                      ".ts",
                      ".js"
                    ]
                  }
                }
              }
            }
          ]
        }
      }
    },
    "Script": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Script": {
          "description": "Run javascript in scenario",
          "type": "string",
          "examples": [
            "Vars.name = 'hello'"
          ]
        }
      }
    },
    "Echo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Echo": {
          "anyOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/defaultTags"
                },
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Description"
                    },
                    "msg": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/getText"
                        },
                        {
                          "$ref": "#/definitions/getVar"
                        }
                      ]
                    }
                  }
                }
              ]
            },
            {
              "anyOf": [
                {
                  "$ref": "#/definitions/getText"
                },
                {
                  "$ref": "#/definitions/getVar"
                }
              ]
            }
          ]
        }
      }
    },
    "Clear": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Clear": {
          "type": "null",
          "description": "Clear screen"
        }
      }
    },
    "Schema": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Schema": {
          "anyOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/defaultTags"
                },
                {
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Description"
                    },
                    "msg": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/getObject"
                        },
                        {
                          "$ref": "#/definitions/getVar"
                        }
                      ]
                    }
                  }
                }
              ]
            },
            {
              "description": "Print schema data object",
              "type": "string"
            }
          ]
        }
      }
    },
    "Regex": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Regex": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Handle regex content",
              "additionalProperties": false,
              "properties": {
                "ignoreError": {
                  "description": "Keep running the next when got error",
                  "type": [
                    "boolean",
                    "string"
                  ]
                },
                "title": {
                  "type": "string",
                  "description": "Description"
                },
                "action": {
                  "type": "string",
                  "description": "Regex action",
                  "enum": [
                    "match",
                    "exec",
                    "test"
                  ],
                  "default": "match"
                },
                "input": {
                  "type": "string",
                  "description": "Regex pattern",
                  "examples": [
                    "${new String(${cnt})}"
                  ]
                },
                "var": {
                  "description": "Set result to a variable after handle",
                  "$ref": "#/definitions/setVar"
                },
                "pattern": {
                  "type": "string",
                  "description": "Regex pattern"
                }
              }
            }
          ]
        }
      }
    },
    "Require": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Require": {
          "oneOf": [
            {
              "type": "array",
              "description": "Load modules in app",
              "items": {
                "type": "string"
              }
            },
            {
              "allOf": [
                {
                  "$ref": "#/definitions/defaultTags"
                },
                {
                  "type": "object",
                  "description": "Dynamic load custom tags",
                  "additionalProperties": false,
                  "properties": {
                    "root": {
                      "type": "string",
                      "description": "Root path where modules are installed",
                      "examples": [
                        "yarn global add $MODULE_NAME",
                        "/Users/$USER/.config/yarn/global/node_modules"
                      ]
                    },
                    "code": {
                      "type": "string",
                      "description": "Write code init here. Some global vars (Vars, Validate, ExternalLibraries, Utils, context)",
                      "examples": [
                        "context.log('here')"
                      ]
                    },
                    "modules": {
                      "type": "array",
                      "description": "Load modules in app",
                      "examples": [
                        "/home/user/my-modules/dist/index.js"
                      ],
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              ]
            }
          ]
        }
      }
    },
    "Pause": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Pause": {
          "anyOf": [
            {
              "allOf": [
                {
                  "$ref": "#/definitions/defaultTags"
                },
                {
                  "type": "object",
                  "description": "Pause or delay",
                  "additionalProperties": false,
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Description"
                    },
                    "time": {
                      "anyOf": [
                        {
                          "type": "number"
                        },
                        {
                          "$ref": "#/definitions/getVar"
                        }
                      ],
                      "description": "Miliseconds"
                    }
                  }
                }
              ]
            },
            {
              "type": "integer",
              "description": "Sleep in miliseconds"
            },
            {
              "type": "null",
              "description": "Pause"
            }
          ]
        }
      }
    },
    "Input": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Input": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Get data from input keyboard",
              "required": [
                "var"
              ],
              "additionalProperties": false,
              "properties": {
                "title": {
                  "type": "string"
                },
                "var": {
                  "description": "Assign user input value to",
                  "$ref": "#/definitions/setVar"
                },
                "required": {
                  "description": "User input must be required",
                  "type": "boolean"
                },
                "pattern": {
                  "description": "Pattern to validate",
                  "type": "string"
                },
                "type": {
                  "description": "Input type",
                  "enum": [
                    "text",
                    "password",
                    "invisible",
                    "number",
                    "confirm",
                    "list",
                    "toggle",
                    "select",
                    "multiselect",
                    "autocompleteMultiselect",
                    "autocomplete",
                    "date"
                  ]
                },
                "initial": {
                  "description": "Init value",
                  "type": [
                    "number",
                    "string",
                    "boolean",
                    "null"
                  ]
                },
                "instructions": {
                  "description": "Instructions",
                  "type": "string"
                },
                "choices": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "title",
                      "value"
                    ],
                    "properties": {
                      "title": {
                        "type": "string"
                      },
                      "description": {
                        "type": "string"
                      },
                      "value": {
                        "type": [
                          "string",
                          "number",
                          "boolean",
                          "null",
                          "array",
                          "object"
                        ]
                      }
                    }
                  }
                }
              }
            }
          ]
        }
      }
    },
    "Exec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Exec": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Execute external command",
              "required": [
                "args"
              ],
              "additionalProperties": false,
              "properties": {
                "ignoreError": {
                  "description": "Keep running the next when got error",
                  "type": [
                    "boolean",
                    "string"
                  ]
                },
                "title": {
                  "type": "string"
                },
                "var": {
                  "description": "Set result after execution",
                  "$ref": "#/definitions/setVar"
                },
                "args": {
                  "type": "array",
                  "description": "The first is command name, then are agrs",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          ]
        }
      }
    },
    "PreExec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "PreExec": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Pre-execute external command when startup",
              "required": [
                "args"
              ],
              "additionalProperties": false,
              "properties": {
                "ignoreError": {
                  "description": "Keep running the next when got error",
                  "type": [
                    "boolean",
                    "string"
                  ]
                },
                "title": {
                  "type": "string"
                },
                "var": {
                  "description": "Set result after execution",
                  "$ref": "#/definitions/setVar"
                },
                "args": {
                  "type": "array",
                  "description": "The first is command name, then are agrs",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          ]
        }
      }
    },
    "Validate": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Validate": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Use an existed validation or method from https://www.chaijs.com/",
              "examples": [
                "length",
                "schema",
                "match",
                "in"
              ],
              "required": [
                "func"
              ],
              "properties": {
                "ignoreError": {
                  "description": "Keep running the next when got error",
                  "type": [
                    "boolean",
                    "string"
                  ]
                },
                "title": {
                  "type": "string",
                  "description": "Validation details"
                },
                "func": {
                  "description": "Function name or function",
                  "type": "string",
                  "examples": [
                    "match",
                    "empty",
                    "(...args): Error & {actual: any, expected: any} => {}"
                  ]
                },
                "args": {
                  "description": "Arguments function",
                  "type": "array",
                  "items": {
                    "type": [
                      "object",
                      "string",
                      "array",
                      "boolean",
                      "number",
                      "null"
                    ]
                  }
                }
              }
            }
          ]
        }
      }
    },
    "Utils": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Utils": {
          "type": "object",
          "description": "Declare new util functions",
          "examples": [
            "${Utils.toLower}"
          ]
        }
      }
    },
    "Validator": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Validator": {
          "type": "object",
          "description": "Declare new validates which is used in Api, Validate, Get... tags"
        }
      }
    },
    "Testcase": {
      "type": "object",
      "description": "Includes all of scenarios",
      "required": [
        "steps",
        "title"
      ],
      "properties": {
        "ignoreError": {
          "description": "Keep running the next when got error",
          "type": [
            "boolean",
            "string"
          ]
        },
        "encryptPassword": {
          "description": "Password to encrypt scenario file to share to someone",
          "type": "string"
        },
        "title": {
          "type": "string",
          "description": "Document title"
        },
        "description": {
          "type": "string",
          "description": "Document description"
        },
        "version": {
          "type": "string",
          "description": "Document version"
        },
        "servers": {
          "type": "object",
          "description": "Servers which is published to client implements"
        },
        "developer": {
          "type": "string",
          "description": "Developer email"
        },
        "vars": {
          "$ref": "#/definitions/declareGlobalVars"
        },
        "templates": {
          "$ref": "#/definitions/allOfSteps",
          "description": "Declare steps which not used to run, just extends"
        },
        "steps": {
          "$ref": "#/definitions/allOfSteps"
        }
      }
    },
    "Vars": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Vars": {
          "$ref": "#/definitions/declareGlobalVars"
        }
      }
    },
    "DocSwagger": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DocSwagger": {
          "description": "Deprecated! Should use DocOpenAPI",
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "required": [
                "saveTo"
              ],
              "description": "Document this to swagger file",
              "properties": {
                "convertToMarkdown": {
                  "description": "Auto convert swagger file to markdown file",
                  "type": "boolean",
                  "default": false
                },
                "allowResponseHeaders": {
                  "description": "Only doc these response headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "allowHeaders": {
                  "description": "Only doc these request headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "raw": {
                  "description": "Raw data of swagger Open API",
                  "required": [],
                  "$ref": "https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/v3.0/schema.json#"
                },
                "saveTo": {
                  "type": "string",
                  "description": "Target file"
                }
              }
            }
          ]
        }
      }
    },
    "DocOpenAPI": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DocOpenAPI": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "required": [
                "saveTo"
              ],
              "description": "Document this to swagger file",
              "properties": {
                "src": {
                  "type": "string",
                  "description": "Swagger file (openapi) which contains \"$ref\" to other files will be replace and merge to a new swagger, md file",
                  "examples": [
                    "../swagger-example.yaml"
                  ]
                },
                "allowResponseHeaders": {
                  "description": "Only doc these response headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "allowHeaders": {
                  "description": "Only doc these request headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "openapi": {
                  "description": "Raw data of swagger Open API",
                  "required": [],
                  "anyOf": [
                    {
                      "$ref": "https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/v3.0/schema.json#"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "$ref": {
                          "description": "Auto reference this api to another api in openapi yaml file",
                          "type": "string",
                          "examples": [
                            "../user-swagger.yaml#/paths/%2Fcreate%2Fuser-service/user"
                          ]
                        }
                      }
                    }
                  ]
                },
                "saveTo": {
                  "type": "object",
                  "description": "Target files",
                  "properties": {
                    "markdown": {
                      "type": "string",
                      "description": "Markdown document file path",
                      "examples": [
                        "./api-document.md"
                      ]
                    },
                    "swagger": {
                      "type": "string",
                      "description": "Swagger document file path",
                      "examples": [
                        "./api-document.yaml"
                      ]
                    }
                  }
                }
              }
            }
          ]
        }
      }
    },
    "DocMarkdown": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DocMarkdown": {
          "description": "Deprecated! Should use DocOpenAPI",
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "required": [
                "saveTo"
              ],
              "description": "Document this to markdown file",
              "properties": {
                "allowResponseHeaders": {
                  "description": "Only doc these response headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "allowHeaders": {
                  "description": "Only doc these request headers",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "saveTo": {
                  "type": "string",
                  "description": "Target file"
                },
                "title": {
                  "type": "string",
                  "description": "Description"
                }
              }
            }
          ]
        }
      }
    },
    "OutputFile": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "OutputFile": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "required": [
                "saveTo"
              ],
              "properties": {
                "saveTo": {
                  "type": "string",
                  "description": "Target file"
                },
                "title": {
                  "type": "string",
                  "description": "Description"
                },
                "content": {
                  "type": "string",
                  "description": "File content"
                }
              }
            }
          ]
        }
      }
    },
    "Get": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Get": {
          "type": "object",
          "description": "Make a Get request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Post": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Post": {
          "type": "object",
          "description": "Make a Post request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Put": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Put": {
          "type": "object",
          "description": "Make a Put request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Patch": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Patch": {
          "type": "object",
          "description": "Make a Patch request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Head": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Head": {
          "type": "object",
          "description": "Make a Head request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Delete": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Delete": {
          "type": "object",
          "description": "Make a Delete request",
          "$ref": "#/definitions/rawApi"
        }
      }
    },
    "Api": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Api": {
          "allOf": [
            {
              "$ref": "#/definitions/rawApi"
            },
            {
              "type": "object",
              "description": "Make a RESTFUL API",
              "properties": {
                "method": {
                  "type": "string",
                  "description": "Http method",
                  "enum": [
                    "GET",
                    "POST",
                    "PUT",
                    "DELETE",
                    "PATCH",
                    "HEAD"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    "Templates": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Templates": {
          "$ref": "#/definitions/allOfSteps",
          "description": "Declare steps which not used to run, just extends"
        }
      }
    },
    "Menu": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Menu": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Menu items",
              "properties": {
                "title": {
                  "type": [
                    "string"
                  ],
                  "description": "Menu title"
                },
                "description": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Menu description"
                },
                "select": {
                  "type": "string",
                  "default": "one",
                  "enum": [
                    "one",
                    "many"
                  ],
                  "description": "Allow pick 1 or many items"
                },
                "loop": {
                  "type": "string",
                  "description": "Loop in object or array. (Get in menu: '$.loopKey', '$.loopValue'), Get in each steps ('$$.loopKey', '$$.loopValue')"
                },
                "templates": {
                  "$ref": "#/definitions/allOfSteps",
                  "description": "Declare steps which not used to run, just extends"
                },
                "items": {
                  "$ref": "#/definitions/allOfSteps",
                  "description": "Menu items"
                }
              }
            }
          ]
        }
      }
    },
    "Group": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Group": {
          "allOf": [
            {
              "$ref": "#/definitions/defaultTags"
            },
            {
              "type": "object",
              "description": "Group steps",
              "properties": {
                "ignoreError": {
                  "description": "Keep running the next when got error",
                  "type": [
                    "boolean",
                    "string"
                  ]
                },
                "title": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Group title"
                },
                "description": {
                  "type": "string",
                  "description": "Group description"
                },
                "loop": {
                  "type": "string",
                  "description": "Loop in object or array. (Get in group: '$.loopKey', '$.loopValue'), Get in each steps ('$$.loopKey', '$$.loopValue')"
                },
                "templates": {
                  "$ref": "#/definitions/allOfSteps",
                  "description": "Declare steps which not used to run, just extends"
                },
                "steps": {
                  "$ref": "#/definitions/allOfSteps"
                }
              }
            }
          ]
        }
      }
    },
    "rawApi": {
      "type": "object",
      "description": "Make a RESTFUL API",
      "allOf": [
        {
          "$ref": "#/definitions/defaultTags"
        },
        {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "ignoreError": {
              "description": "Keep running the next when got error",
              "type": [
                "boolean",
                "string"
              ]
            },
            "depends": {
              "description": "This only validate for the before step, not show log request, only show validate log",
              "type": "boolean"
            },
            "debug": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "$ref": "#/definitions/getVar"
                },
                {
                  "type": "string",
                  "enum": [
                    "curl",
                    "request",
                    "response",
                    "details"
                  ]
                }
              ],
              "description": "Show debug log"
            },
            "title": {
              "type": [
                "string",
                "null"
              ],
              "description": "API title"
            },
            "description": {
              "type": [
                "string",
                "null"
              ],
              "description": "API description"
            },
            "baseURL": {
              "type": "string",
              "description": "Base url"
            },
            "url": {
              "type": "string",
              "description": "Path or full request url"
            },
            "timeout": {
              "type": [
                "string",
                "number"
              ],
              "description": "Request timeout"
            },
            "query": {
              "type": "object",
              "description": "Request query string"
            },
            "headers": {
              "type": "object",
              "description": "Request headers"
            },
            "params": {
              "type": "object",
              "description": "Request params in url (/user/{ID})",
              "examples": [
                "{ID: 123}"
              ]
            },
            "body": {
              "type": [
                "array",
                "integer",
                "null",
                "number",
                "object",
                "string",
                "boolean"
              ],
              "description": "Request body"
            },
            "var": {
              "description": "Set response data to a variable after call request",
              "$ref": "#/definitions/setVar",
              "examples": [
                "Set response data ($.response.data) if it's string",
                "Set response ($.response) to its properties if it's object"
              ]
            },
            "validate": {
              "type": "array",
              "description": "Validate after call request. Same Validate",
              "items": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "Status": {
                        "anyOf": [
                          {
                            "type": [
                              "number",
                              "string"
                            ]
                          },
                          {
                            "type": "array",
                            "items": {
                              "type": [
                                "number",
                                "string"
                              ]
                            }
                          }
                        ]
                      },
                      "StatusText": {
                        "anyOf": [
                          {
                            "type": [
                              "string",
                              "number",
                              "boolean",
                              "null"
                            ]
                          }
                        ]
                      }
                    }
                  },
                  {
                    "$ref": "#/definitions/Validate"
                  }
                ]
              }
            },
            "docs": {
              "anyOf": [
                {
                  "$ref": "#/definitions/getVar"
                },
                {
                  "type": "object",
                  "description": "Document information for this api",
                  "properties": {
                    "allowHeaders": {
                      "description": "Only doc these request headers",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "allowResponseHeaders": {
                      "description": "Only doc these response headers",
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "params": {
                      "description": "Params json schema in path",
                      "type": "object"
                    },
                    "query": {
                      "description": "Query json schema in query string",
                      "type": "object"
                    },
                    "headers": {
                      "description": "Request headers json schema",
                      "type": "object"
                    },
                    "body": {
                      "description": "Request body json schema",
                      "type": "object"
                    },
                    "responseHeaders": {
                      "description": "Response headers json schema",
                      "type": "object"
                    },
                    "deprecated": {
                      "type": "boolean",
                      "description": "Api is deprecated"
                    },
                    "data": {
                      "description": "Response data json schema",
                      "type": "object"
                    },
                    "tags": {
                      "description": "Tags",
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "uniqueItems": true
                    },
                    "md": {
                      "tags": {
                        "description": "Tag",
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "uniqueItems": true
                      }
                    },
                    "openapi": {
                      "description": "Set openapi properties",
                      "anyOf": [
                        {
                          "$ref": "https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/v3.0/schema.json#/definitions/Operation"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "$ref": {
                              "description": "Ref to API path in yaml file",
                              "type": "string",
                              "examples": [
                                "../another_api.yaml#/paths/%2Fuser%2Fregister/post"
                              ]
                            }
                          }
                        }
                      ]
                    },
                    "swagger": {
                      "description": "Set swagger properties",
                      "anyOf": [
                        {
                          "$ref": "https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/v3.0/schema.json#/definitions/Operation"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "$ref": {
                              "description": "Ref to API path in yaml file",
                              "type": "string",
                              "examples": [
                                "../another_api.yaml#/paths/%2Fuser%2Fregister/post"
                              ]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              ]
            },
            "benchmark": {
              "type": "object",
              "description": "Test benchmark this",
              "properties": {
                "wrk": {
                  "description": "Use wrk to test (https://github.com/wg/wrk)",
                  "type": "object",
                  "properties": {
                    "title": {
                      "type": "string",
                      "description": "Benchmark title"
                    },
                    "saveTo": {
                      "type": "string",
                      "description": "Save benchmark result to"
                    },
                    "info": {
                      "type": "object",
                      "description": "Environment information",
                      "examples": [
                        {
                          "env": "production|staging|local",
                          "number of pods": "30"
                        }
                      ]
                    },
                    "connections": {
                      "type": [
                        "number",
                        "string"
                      ],
                      "description": "Connections to keep open"
                    },
                    "script": {
                      "type": "string",
                      "description": "Load Lua script file"
                    },
                    "duration": {
                      "type": "string",
                      "description": "Duration of test",
                      "examples": [
                        "30s"
                      ]
                    },
                    "threads": {
                      "type": [
                        "number",
                        "string"
                      ],
                      "description": "Number of threads to use"
                    },
                    "latency": {
                      "type": "boolean",
                      "description": "Print latency statistics"
                    },
                    "timeout": {
                      "type": "string",
                      "description": "Socket/request timeout",
                      "examples": [
                        "2s"
                      ]
                    },
                    "version": {
                      "type": "boolean",
                      "description": "Print version details"
                    },
                    "var": {
                      "description": "Set result after execution",
                      "anyOf": [
                        {
                          "type": "string",
                          "description": "Result code",
                          "examples": [
                            0,
                            1
                          ]
                        },
                        {
                          "type": "object",
                          "description": "Set result to this properties",
                          "examples": [
                            "${$.log}",
                            "${$.code}"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        }
      ]
    },
    "declareGlobalVars": {
      "type": "object",
      "description": "Declare global variables. It's stored in Vars"
    },
    "getText": {
      "type": "string",
      "description": "Text content"
    },
    "getObject": {
      "type": [
        "object",
        "array",
        "boolean",
        "number",
        "string"
      ],
      "description": "Object value"
    },
    "getVar": {
      "description": "Eval string to object value",
      "type": "string",
      "examples": [
        "${name}: Return Vars.name"
      ]
    },
    "setVar": {
      "description": "Set value to a variable",
      "anyOf": [
        {
          "type": "string",
          "description": "Set value to this",
          "examples": [
            "varname: Get value from ${varname} or Vars.varname"
          ]
        },
        {
          "type": "object",
          "description": "Set a part of data to this"
        }
      ]
    },
    "defaultTags": {
      "type": "object",
      "properties": {
        "async": {
          "description": "Run asynchronized",
          "type": [
            "boolean",
            "string"
          ]
        },
        "testIt": {
          "type": "boolean"
        },
        "disabled": {
          "type": [
            "boolean",
            "string"
          ]
        },
        "->": {
          "type": "string",
          "description": "Expose for another extends"
        },
        "<-": {
          "description": "Extends another which expose by '->'",
          "anyOf": [
            {
              "type": "string",
              "description": "Separate by ','"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ]
        }
      }
    }
  }
}
